## notes: SplittingStrings.md    FROM ChatGPT《Kotlin-202511》

**什么是“字符类”，为什么要写成 \\.**

核心就两块：**什么是“字符类”**，以及 **为什么要写成 `\\`**。我直接用你这段代码一点点拆给你看。

------

## 1. 正则里的“字符类”是啥？

**字符类（character class）**就是把一组“可选字符”放在 `[]` 里面，表示“匹配其中任意一个”。

- `[abc]`：匹配 `a` 或 `b` 或 `c`
- `[0-9]`：匹配任意数字
- `[a-zA-Z_]`：匹配任意大小写字母或下划线

对你这段代码：

```
"12.345-6.A".split("[.\\-]".toRegex())
```

`[.\\-]` 是一个字符类，**意思是：匹配 `.` 或 `-`**。
 这样 `split()` 就会在 `.` 或 `-` 的位置把字符串切开。

再看第三行：

```
"12.345-6.A".split("[.-]".toRegex())
```

在字符类 `[]` 里面，有个特殊规则：

- `-` 如果写在**中间**：`[a-z]` 表示区间
- `-` 如果写在**开头或结尾**：`[-.]` / `[.-]` 就只是普通的减号字符

也就是说：

- `[.-]`：不是“从 `.` 到 `-` 的区间”，而是“`.` 或 `-`”
- 所以 `[.-]` 和 `[.\\-]` 实际效果一样，都是“匹配 `.` 或 `-`”

------

## 2. 为什么要写两个反斜杠 `\\`？

这是典型的「**两层转义**」问题：

1. **正则表达式层面**：
   - 在正则中，`.` 是“匹配任意字符”的元字符
   - 想要匹配“字面意义上的点号 `.`”，要写成 `\.`
   - 想要在字符类里写“字面意义上的减号 `-`”且不在开头/结尾时，要写成 `\-`
2. **Kotlin 字符串字面量层面**：
   - 在普通字符串 `"..."` 里，`\` 本身也是转义符
   - 你想在字符串里放一个真正的 `\`，就得写 `"\\"`

两层叠在一起，就变成：

- 想让**正则**看到 `\.`
  - 你必须在 **Kotlin 字符串** 里写 `"\\."`
- 想让**正则**看到 `\-`
  - 你必须在 **Kotlin 字符串** 里写 `"\\-"`

所以：

```
"\\.|-".toRegex()
```

Kotlin 字符串的真实内容是：`\.|-`
 交给正则后，解释为：**“匹配 `.` 或 `-`”**，`|` 是“或”。

```
"[.\\-]".toRegex()
```

Kotlin 字符串的真实内容是：`[.\-]`
 正则看到的是一个字符类：**“`.` 或 `-`”**。

------

## 3. 三行代码各自在干嘛？

再帮你把三行都翻译成“正则含义”：

```
println("12.345-6.A".split("\\.|-".toRegex()))
// 正则：\.|-
// 解释：匹配 “.” 或 “-”

println("12.345-6.A".split("[.\\-]".toRegex()))
// 正则：[.\-]
// 解释：字符类，匹配 “.” 或 “-”

println("12.345-6.A".split("[.-]".toRegex()))
// 正则：[.-]
// 解释：字符类，“.” 或 “-”（因为 - 在结尾，被当作普通字符）
```

所以输出结果都一样：

```
[12, 345, 6, A]
```

------

## 4. 一个小窍门：可以用原始字符串避免写 `\\`

Kotlin 有原始字符串：`"""..."""`，里面的 `\` 不需要再转义。

例如：

```
"12.345-6.A".split("""\.|-""".toRegex())
"12.345-6.A".split("""[.-]""".toRegex())
```

这样就不用写 `\\` 了，看起来也清爽很多。

------

## 5. 顺便提一句：其实这里你都可以不用正则 😂

Kotlin 的 `split` 还有一个重载：

```
"12.345-6.A".split('.', '-')
```

这就是按字符直接分割，不走正则，逻辑跟前面那几行是一样的。

------

如果你愿意，我可以再给你一张「正则常用写法 + Kotlin 字符串该怎么写」的小对照表，让你以后一看就能回忆起来。
